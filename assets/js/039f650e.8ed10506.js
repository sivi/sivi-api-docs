"use strict";(self.webpackChunksivi_docs=self.webpackChunksivi_docs||[]).push([[1047],{24746:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"sivi-ui-sdk/superuser-features/superuser-authentication","title":"Authentication","description":"This document explains how authentication works with the Sivi UI SDK and provides examples for superuser implementations.","source":"@site/docs/sivi-ui-sdk/superuser-features/superuser-authentication.md","sourceDirName":"sivi-ui-sdk/superuser-features","slug":"/sivi-ui-sdk/superuser-features/superuser-authentication","permalink":"/docs/sivi-ui-sdk/superuser-features/superuser-authentication","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"superuser-authentication"},"sidebar":"tutorialSidebar","previous":{"title":"Installation & Configuration","permalink":"/docs/sivi-ui-sdk/superuser-features/superuser-installation-config"},"next":{"title":"Widget Functions & Events","permalink":"/docs/sivi-ui-sdk/superuser-features/superuser-widget-functions-events"}}');var s=t(74848),r=t(28453);const a={id:"superuser-authentication"},o="Authentication",u={},c=[{value:"Authentication Methods Overview",id:"authentication-methods-overview",level:2},{value:"Superuser Based Authentication",id:"superuser-based-authentication",level:2},{value:"Authentication Sequence Flow",id:"authentication-sequence-flow",level:3},{value:"Authentication API",id:"authentication-api",level:3},{value:"Widget Authentication Example",id:"widget-authentication-example",level:3},{value:"Token Refresh Handling",id:"token-refresh-handling",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,s.jsx)(n.p,{children:"This document explains how authentication works with the Sivi UI SDK and provides examples for superuser implementations."}),"\n",(0,s.jsx)(n.h2,{id:"authentication-methods-overview",children:"Authentication Methods Overview"}),"\n",(0,s.jsx)(n.p,{children:"Sivi UI SDK supports two authentication approaches:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Standard UI SDK Authentication"})," - Default authentication flow with login UI. User will be redirected to Sivi's login page. Refer ",(0,s.jsx)(n.a,{href:"../authentication",children:"Standard UI SDK Authentication"})," for more details."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Superuser Based Authentication"})," - Frictionless machine-to-machine authentication without end-user intervention."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"superuser-based-authentication",children:"Superuser Based Authentication"}),"\n",(0,s.jsx)(n.p,{children:"Superuser based implementations benefit from a frictionless authentication system with these advantages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"User Abstraction"})," - Sivi does not store any of your users' personal information"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Seamless Integration"})," - Users don't need to create separate Sivi accounts"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Programmatic Auth"})," - Authentication happens via API without user intervention"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The authentication process works as follows:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Your frontend application captures the ",(0,s.jsx)(n.code,{children:"SIVI_WIDGET_EVENT_NEED_AUTH"})," event from the Sivi widget"]}),"\n",(0,s.jsx)(n.li,{children:"Your backend server makes a call to the Sivi Login User API to obtain tokens for your user"}),"\n",(0,s.jsx)(n.li,{children:"Your application provides the tokens to the widget during initialization"}),"\n",(0,s.jsx)(n.li,{children:"The widget uses these tokens for all subsequent API calls to Sivi Server"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"authentication-sequence-flow",children:"Authentication Sequence Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant SiviWidget as Sivi Widget\n    participant YourApp as Your Application\n    participant YourServer as Your Server\n    participant SiviServer as Sivi Server\n    \n    Note over SiviWidget,YourApp: Widget Initialize\n    SiviWidget->>YourApp: SIVI_WIDGET_EVENT_NEED_AUTH event triggered\n    YourApp->>YourServer: Send abstractUserId\n    YourServer->>SiviServer: Request tokens with abstractUserId using login-user API\n    SiviServer->>YourServer: Return access & refresh tokens\n    YourServer->>YourApp: Return tokens\n    YourApp->>SiviWidget: Set tokens to the widget"}),"\n",(0,s.jsx)(n.h3,{id:"authentication-api",children:"Authentication API"}),"\n",(0,s.jsx)(n.p,{children:"To authenticate users programmatically, use the Login User API endpoint:"}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"../../sivi-api/user-management-api/login-user",children:"Login User API Reference"})," for complete details."]}),"\n",(0,s.jsx)(n.h3,{id:"widget-authentication-example",children:"Widget Authentication Example"}),"\n",(0,s.jsxs)(n.p,{children:["Implementing superuser based authentication with the widget using the ",(0,s.jsx)(n.code,{children:"SIVI_WIDGET_EVENT_INIT"})," event:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// First register the event handler to provide auth tokens\nwindow.SIVI.events(async (event, responseCallback) => {\n  switch (event.type) {\n    case 'SIVI_WIDGET_EVENT_NEED_AUTH': {\n      try {\n        // Get tokens from your backend server\n        const authResponse = await fetch('/your-backend-auth-endpoint', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            userId: 'your-current-user-id' // this will be passed as an abstract user id for us.\n          })\n        });\n        \n        const authData = await authResponse.json();\n        \n        // Return tokens to the widget\n        responseCallback({\n          accessToken: authData.accessToken,\n          refreshToken: authData.refreshToken\n        });\n      } catch (error) {\n        console.error('Authentication failed', error);\n        responseCallback({\n          error: 'Authentication failed'\n        });\n      }\n      break;\n    }\n    \n    // Handle other events...\n    default:\n      responseCallback('done');\n      break;\n  }\n});\n\n// Then open the widget\nwindow.SIVI.show({\n  type: \"socialMedia\",\n  subtype: \"instagram\",\n  // Other configuration options...\n}, \"sivi-container\");\n"})}),"\n",(0,s.jsx)(n.h3,{id:"token-refresh-handling",children:"Token Refresh Handling"}),"\n",(0,s.jsx)(n.p,{children:"Widget handles the token refresh automatically after setting the tokens."}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Never expose your API Key"})," in client-side code"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always authenticate users"})," on your backend server"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use HTTPS"})," for all API calls"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate user identity"})," before requesting tokens"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);
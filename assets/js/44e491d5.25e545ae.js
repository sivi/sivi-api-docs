"use strict";(self.webpackChunksivi_docs=self.webpackChunksivi_docs||[]).push([[9415],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(96540);const s={},a=t.createContext(s);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(a.Provider,{value:n},e.children)}},58923:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"sivi-ui-sdk/superuser-features/superuser-sample-usage","title":"Sample Usage","description":"This guide demonstrates a complete implementation of the Superuser Features using Sivi UI SDK in a React application. The sample shows how to integrate the Sivi design generation capabilities into a content editor application like Website builders, CMS, Email editors, Banner editors and so on, allowing users to generate and place designs directly within content templates.","source":"@site/docs/sivi-ui-sdk/superuser-features/superuser-sample-usage.md","sourceDirName":"sivi-ui-sdk/superuser-features","slug":"/sivi-ui-sdk/superuser-features/superuser-sample-usage","permalink":"/docs/sivi-ui-sdk/superuser-features/superuser-sample-usage","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"superuser-sample-usage","title":"Sample Usage"},"sidebar":"tutorialSidebar","previous":{"title":"User Brand Setup","permalink":"/docs/sivi-ui-sdk/superuser-features/superuser-brand-setup"},"next":{"title":"Enterprise Onboarding","permalink":"/docs/sivi-ui-sdk/superuser-features/enterprise-onboarding"}}');var s=i(74848),a=i(28453);const l={id:"superuser-sample-usage",title:"Sample Usage"},r="Sivi UI SDK Sample Implementation - Superuser Features",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Implementation Breakdown",id:"implementation-breakdown",level:2},{value:"1. Setup and Constants",id:"1-setup-and-constants",level:3},{value:"2. Template Logic Hook",id:"2-template-logic-hook",level:3},{value:"3. Template Component",id:"3-template-component",level:3},{value:"4. Main Application Component",id:"4-main-application-component",level:3},{value:"5. Sivi Widget Initialization",id:"5-sivi-widget-initialization",level:3},{value:"6. Event Handling",id:"6-event-handling",level:3},{value:"7. Application UI Rendering",id:"7-application-ui-rendering",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"sivi-ui-sdk-sample-implementation---superuser-features",children:"Sivi UI SDK Sample Implementation - Superuser Features"})}),"\n",(0,s.jsx)(n.p,{children:"This guide demonstrates a complete implementation of the Superuser Features using Sivi UI SDK in a React application. The sample shows how to integrate the Sivi design generation capabilities into a content editor application like Website builders, CMS, Email editors, Banner editors and so on, allowing users to generate and place designs directly within content templates."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This sample implements a simplified content editor with the following features:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A template with placeholders for design elements"}),"\n",(0,s.jsx)(n.li,{children:"Integration with the Sivi UI SDK for AI-powered design generation"}),"\n",(0,s.jsx)(n.li,{children:"Ability to select generated designs and place them in the template"}),"\n",(0,s.jsxs)(n.li,{children:["Celebration animation when designs are selected. ",(0,s.jsx)("span",{style:{fontSize:20},role:"img","aria-label":"confetti emoji",children:"\ud83c\udf8a"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"implementation-breakdown",children:"Implementation Breakdown"}),"\n",(0,s.jsx)(n.h3,{id:"1-setup-and-constants",children:"1. Setup and Constants"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import './App.css'\nimport React from 'react'\nimport ConfettiExplosion from 'react-confetti-explosion';\n\nconst IFRAME_CONTAINER_ID = 'sivi-container'\n"})}),"\n",(0,s.jsx)(n.p,{children:"This section imports the required dependencies and defines the container ID where the Sivi widget will be embedded."}),"\n",(0,s.jsx)(n.h3,{id:"2-template-logic-hook",children:"2. Template Logic Hook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const useTemplateLogic = ({ imageUrl, handleVisualClick, shapes }) => {\n  const selectedVisual = React.useRef(null)\n  const [visualShapes, setVisualShapes] = React.useState(shapes)\n\n  const handleShapeClick = (event, id) => {\n    const width = event.target.offsetWidth\n    const height = event.target.offsetHeight\n\n    selectedVisual.current = id\n\n    handleVisualClick && handleVisualClick({\n      width,\n      height\n    })\n  }\n\n  React.useEffect(() => {\n    if (imageUrl && selectedVisual.current) {\n      setVisualShapes(prev => {\n        return {\n          ...prev,\n          [selectedVisual.current]: {\n            imageUrl: imageUrl\n          }\n        }\n      })\n    }\n  }, [imageUrl])\n\n  return {\n    visualShapes,\n    handleShapeClick\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creates a custom hook to manage the template's design placement logic"}),"\n",(0,s.jsx)(n.li,{children:"Tracks which placeholder is currently selected using a React ref"}),"\n",(0,s.jsx)(n.li,{children:"Updates the appropriate placeholder when a new design is selected"}),"\n",(0,s.jsx)(n.li,{children:"Provides dimensions of the selected area to the Sivi widget for appropriate sizing"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-template-component",children:"3. Template Component"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const WebTemplate = ({ handleVisualClick, imageUrl }) => {\n  const { visualShapes, handleShapeClick } = useTemplateLogic({\n    imageUrl,\n    handleVisualClick,\n    shapes: {\n      shape1: {\n        url: null\n      },\n      shape2: {\n        url: null\n      }\n    }\n  })\n\n  return (\n    <div className='w-[600px] h-[700px] bg-gray-100 flex flex-col items-center p-4 gap-4'>\n      <span className='text-8xl font-bold text-indigo-500'>\n        Momentum Athletics\n      </span>\n      <div className='w-full h-full flex gap-4 flex-row items-center'>\n        <div onClick={(e) => handleShapeClick(e, 'shape1')} className='cursor-pointer w-1/2 h-full bg-green-200 flex flex-col justify-center items-center'>\n          {visualShapes.shape1.imageUrl ? \n            <img src={visualShapes.shape1.imageUrl} alt=\"Extracted Image\" className='w-full h-full object-contain' /> : (\n            <div className='w-full h-full flex justify-center items-center cursor-pointer'>\n              <p className='text-gray-500 text-center'>Click to add visuals</p>\n            </div>\n          )}\n        </div>\n        <div className='w-1/2 h-full flex flex-col items-center'>\n          <div id=\"shape2\" onClick={(e) => handleShapeClick(e, 'shape2')} className='cursor-pointer w-full h-1/2 bg-blue-200 flex flex-col justify-center items-center'>\n            {visualShapes.shape2.imageUrl ? \n              <img src={visualShapes.shape2.imageUrl} alt=\"Extracted Image\" className='w-full h-full object-contain' /> : (\n              <div className='w-full h-full flex justify-center items-center cursor-pointer'>\n                <p className='text-gray-500 text-center'>Click to add visuals</p>\n              </div>\n            )}\n          </div>\n          <div className='w-full h-1/2 flex flex-col justify-center items-center'>\n            <span className='text-4xl font-bold text-indigo-500 text-center'>\n              Transform your fitness journey with expert tips and guided training.\n            </span>\n            <span className='text-2xl font-bold text-indigo-500'>\n              Ignite your motivation and get stronger every day.\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Renders a marketing template with placeholders for designs"}),"\n",(0,s.jsx)(n.li,{children:"Uses the template logic hook to manage state and handle interactions"}),"\n",(0,s.jsx)(n.li,{children:'Displays placeholders with "Click to add visuals" text when empty'}),"\n",(0,s.jsx)(n.li,{children:"Shows the selected designs when available"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-main-application-component",children:"4. Main Application Component"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'function App() {\n  let paramsRef = React.useRef(null)\n  const [isExploding, setIsExploding] = React.useState(false);\n  const [isVisualOpen, setIsVisualOpen] = React.useState(false)\n  const [imageUrl, setImageUrl] = React.useState(null)\n  const [currentTemplate, setCurrentTemplate] = React.useState(1)\n\n  const handleVisualClick = ({ width, height }) => {\n    if (!isVisualOpen) {\n      setIsVisualOpen(true)\n\n      paramsRef.current = {\n        width,\n        height\n      }\n    } else {\n      const params = {\n        type: "custom",\n        subtype: "custom",\n        dimension: {\n          width: paramsRef.current.width,\n          height: paramsRef.current.height\n        },\n      }\n\n      window.SIVI.show(params, IFRAME_CONTAINER_ID)\n    }\n  }\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sets up state management for the application"}),"\n",(0,s.jsx)(n.li,{children:"Handles clicks on template placeholders"}),"\n",(0,s.jsx)(n.li,{children:"Stores dimensions of clicked areas for the Sivi widget configuration"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-sivi-widget-initialization",children:"5. Sivi Widget Initialization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'  React.useEffect(() => {\n    if (isVisualOpen) {\n      if (paramsRef.current) {\n        const params = {\n          type: "custom",\n          subtype: "custom",\n          dimension: {\n            width: paramsRef.current.width,\n            height: paramsRef.current.height\n          },\n          prompt: "Create a modern social media post about sustainable fashion",\n          language: "english",\n          colors: ["#5662EC", "#EF9AB2"],\n          numOfVariants: 2,\n          outputFormat: "png",\n          config: {\n            enableDesignEditor: true,\n          }\n        }\n\n        window.SIVI.show(params, IFRAME_CONTAINER_ID)\n        paramsRef.current = null\n      } else {\n        window.SIVI.show(false, IFRAME_CONTAINER_ID)\n      }\n    }\n  }, [isVisualOpen])\n\n  const handleRemoveVisual = () => {\n    window.SIVI.hide()\n    setIsVisualOpen(false)\n  }\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Initializes the Sivi widget when the visual editor should be opened"}),"\n",(0,s.jsx)(n.li,{children:"Configures the widget with appropriate dimensions and parameters"}),"\n",(0,s.jsx)(n.li,{children:"Sets up a default prompt and styling options"}),"\n",(0,s.jsx)(n.li,{children:"Provides a method to close the widget and return to the main interface"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"6-event-handling",children:"6. Event Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"  React.useEffect(() => {\n    window.SIVI.events(async (event, responseCallback) => {\n      switch (event.type) {\n        case 'SIVI_WIDGET_EVENT_DESIGN_VARIANT_SELECTED': {\n          const URL = event.data.variantImageUrl + '?timestamp=' + Date.now()\n          setIsExploding(true)\n          setTimeout(() => {\n            setIsExploding(false)\n          }, 2000)\n          setImageUrl(URL)\n          responseCallback(\"done\")\n          break\n        }\n        case 'SIVI_WIDGET_EVENT_NEED_AUTH': {\n         const user = {\n           email: 'test@gmail.com',\n         }\n         const res = await fetch('http://localhost:4000/login-sivi', {\n           method: 'POST',\n           headers: {\n             'Content-Type': 'application/json',\n           },\n           body: JSON.stringify({ user }),\n         })\n\n         const data = await res.json()\n         responseCallback({\n           accessToken: data.accessToken,\n           refreshToken: data.refreshToken\n         })\n         break\n       }\n       default:\n         responseCallback('done')\n         break\n      }\n    })\n    return () => {\n      window.SIVI.removeEventsCallback()\n    }\n  }, [])\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sets up event listeners for the Sivi widget"}),"\n",(0,s.jsx)(n.li,{children:"Handles the 'SIVI_WIDGET_EVENT_DESIGN_VARIANT_SELECTED' event when a user selects a design"}),"\n",(0,s.jsx)(n.li,{children:"Updates the application state with the selected design URL"}),"\n",(0,s.jsx)(n.li,{children:"Triggers a confetti animation to celebrate design selection"}),"\n",(0,s.jsx)(n.li,{children:"Properly cleans up event listeners when the component unmounts"}),"\n",(0,s.jsx)(n.li,{children:"Handles the 'SIVI_WIDGET_EVENT_NEED_AUTH' event to initialize the Sivi widget with an access token"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"7-application-ui-rendering",children:"7. Application UI Rendering"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"  const TemplateCmp = ({ 1: WebTemplate })[currentTemplate]\n\n  return (\n    <div className='h-full w-full'>\n      <div className='w-full h-16 border-b-2 border-indigo-500 flex flex-row justify-between items-center px-4'>\n        <span className='text-2xl font-bold text-indigo-500'>\n          Mail Editor\n        </span>\n        <div></div>\n      </div>\n      <div className='flex flex-row h-[calc(100%-4rem)] w-full'>\n        <div className='w-1/4 h-full border-r-2 border-indigo-500 p-4'>\n          {isVisualOpen ? (\n            <>\n              <div id={IFRAME_CONTAINER_ID} className='w-full h-5/6 bg-violet-500 rounded-md border-2 border-indigo-200 overflow-hidden'>\n                {/* Iframe placeholder */}\n              </div>\n              <button className='mt-4 w-full h-12 bg-white-500 text-black p-2 rounded-md transition-all duration-300' onClick={handleRemoveVisual}>\n                Back to Home\n              </button>\n            </>\n          ) : <div className='flex h-full w-full justify-center items-center'>\n            <button onClick={() => setIsVisualOpen(true)} className='h-12 w-1/2 bg-indigo-500 text-white p-2 rounded-md hover:bg-indigo-600 transition-all duration-300'>\n              AI Design Studio\n            </button>\n          </div>}\n        </div>\n        <div className='w-[calc(100%-36rem)] h-full flex justify-center items-center'>\n          <div className='w-full h-[calc(100%-5rem)] flex justify-center items-center flex-col'>\n            {isExploding && <ConfettiExplosion />}\n            <TemplateCmp handleVisualClick={handleVisualClick} imageUrl={imageUrl} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What This Does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Renders the complete application interface with a header and two-panel layout"}),"\n",(0,s.jsx)(n.li,{children:"Shows either the launch button or the Sivi widget in the left panel"}),"\n",(0,s.jsx)(n.li,{children:"Displays the content template in the main panel"}),"\n",(0,s.jsx)(n.li,{children:"Includes the confetti animation when designs are selected"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);